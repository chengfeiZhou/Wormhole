package structs

import (
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestTransHTTPMessage(t *testing.T) {
	data := `{"method":"POST","url":"%s/api/v1/tasks","header":{"Accept-Encoding":["gzip"],"Authorization":["Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhc2NvcGUiOiI1IiwiZW1haWwiOiJkc2FAcXEuY29tIiwiZXhwIjoxNjcyMjUyNTYxLCJpZGVudGl0eSI6MTEzLCJvcmlnX2lhdCI6MTY3MjIxNjU2MSwicm9sZUNvZGUiOiIxOTRiOWNlMjllODk0NDNiYTBlMjU1N2M3NTNiMGYwZCIsInJvbGVJZCI6IjM5Iiwicm9sZU5hbWUiOiJ6572R5LiL5Y-R566h55CG5ZGYIiwidXNlcklkIjoxMTMsInVzZXJuYW1lIjoiemFkbWluIn0.Qz6_pZQdgC3NZ8iCd1qlhCbrQzrd1dGjdjqgZeCufw0"],"Content-Length":["3124"],"Content-Type":["application/json"],"User-Agent":["Go-http-client/1.1"]},"body":"eyJ0YXNrdHlwZSI6IiIsImR1cmF0aW9uIjoiMCIsImppZCI6IiIsInByb2dyZXNzIjoiIiwicmVtYWluVGltZSI6IiIsInRhZ3MiOiIiLCJ3b3JrQ2F0ZWdvcnkiOiIiLCJpcExpc3RGaWxlbmFtZSI6IiIsIm5vZGVJZCI6IiIsImRpc3BhdGNoVGltZXMiOjMsIklkIjoiVDIwMjIxMjI4MTcxNjI3MTA5MCIsIm5hbWUiOiJ6LXdwYi00IiwiaXNMb29wIjoxLCJpcENhdGVnb3J5IjoiIiwiaW50ZXJuZXRNb2RlIjoxLCJhc3NldFR5cGUiOjEsInRhc2tDb250ZW50Ijp7ImJhbmR3aWR0aCI6IjMwMCIsImNvcHlJcFRleHQiOiIxMC4xMC4xMC4yMSIsImRldGVjdFBhcmFtIjoiIiwiaHR0cEhlYWRlciI6IkNvbnRlbnQtVHlwZTpqc29uIiwiaXBCbGFja0xpc3QiOiIxOTIuMTAuMTAuMTEsMTAuMTAuMTAuMTEsMjAwMTowMDAwOjFGMUY6MDAwMDowMDAwOjAxMDA6MTFBMDpBRERGLDE5Mi4xNjguMS4xLDE5Mi4xLjEuMSwxMDgwOjoxMjg0OjgwMDoyMTBDOjQxN0EsMTAuMTAuMTIzLjExLDE2LjE2Ni4xMC40LDE2LjE2Ni4xMC4yLDE2LjE2Ni4xMC4xLDE2LjE2Ni4xMC4wLDEwLjEwLjEwLjEyLDEwODA6Ojg6ODAwOjIxMEM6NDE3QSwxOTIuMS4yLjM1LDE5Mi4xLjIuMzQsMTkyLjEuMi4zMywxOTIuMS4yLjMyLDEwODA6Ojg6ODAwOjIwMEM6NDE3QSwxMi4xMi4xMi4yNCwyMDAxOmRiODo6NywyMDAxOmRiODo6NiwyMDAxOmRiODo6NSwyMDAxOmRiODo6NCwyMDAxOmRiODo6MywyMDAxOmRiODo6MiwyMDAxOmRiODo6MSwyMDAxOmRiODo6LDE5Mi4xLjIuMywxOTIuMS4yLjIsMTkyLjEuMi4xLDE5Mi4xLjIuMCwxOTIuMC4yLjMsMTkyLjAuMi4yLDE5Mi4wLjIuMSwxOTIuMC4yLjAsIiwiaXBHcm91cElkIjpbXSwiaXBTY2FuQ29udGVudCI6W10sImlwU2NhblR5cGUiOjEsImlwU291cmNlVHlwZSI6MSwiaXBUZXh0IjoiMTAuMTAuMTAuMjEiLCJpcFR5cGUiOjIsImlzV2FpdCI6MSwicG9ydEdyb3VwSWQiOltdLCJwb3J0VGV4dCI6IjY0NzM4LDYyMDc4LDYxNjE2LDYxNjEzLDYwMDMwLDYwMDEwLDU5MTEwLDU1NTUzLDUxMTA2LDUwMTAwLDUwMDcwLDUwMDUwLDUwMDAwLDQ5MTU1LDQ5MTU0LDQ5MTUzLDQ5MTUyLDQ5MTUxLDQ4ODk5LDQ3ODA4LDQ1NTU0LDQ0ODE4LDQxNzk1LDM3Nzc3LDM0OTY0LDM0OTYyLDMzMzM4LDMyNzY4LDMyNDAwLDMwNzE4LDMwMzEzLDMwMzEyLDMwMzExLDMwMzEwLDI4Nzg0LDI4MDE3LDI3MDE3LDI3MDE1LDI1NTY1LDI1MTA1LDI1MDAwLDIzNDI0LDIzMDIzLDIyMjIyLDIyMTA1LDIwODgwLDIwNTQ3LDIwMDAwLDE4MjQ1LDE4MDgxLDE4MDAxLDE3MTg1LDE2OTkzLDE2OTkyLDE2MDMwLDE2MDEwLDE0MjY1LDE0MTQ3LDE0MDAwLDEzNTc5LDEyMzQ1LDExMzEwLDExMzAwLDExMjExLDExMDAxLDEwMzMzLDEwMjQzLDEwMTYyLDEwMDAxLDEwMDAwLDk5OTksOTk4MSw5OTQ0LDk3MTEsOTcwMCw5NjUzLDk2MDAsOTU5NSw5NTMwLDk1MjcsOTQ0Myw5NDE4LDkzMzMsOTIwMCw5MTkxLDkxNTEsOTEwMCw5MDkzLDkwOTIsOTA5MCw5MDgwLDkwNTEsOTA0Miw5MDEwLDkwMDMsOTAwMSw5MDAwLDg5ODMsODg4OSw4ODg4LDg4ODAsODgzNCw4ODAwLDg2ODYsODY0OSw4NTU0LDg1NDUsODUwMCw4NDQzLDgzNzgsODM3Nyw4MzM0LDgzMzMsODI5MSw4MjAwLDgxNjEsODEzOSw4MTI2LDgxMjUsODExMiw4MDk5LDgwOTgsODA5MCw4MDg5LDgwODcsODA4Niw4MDgxLDgwODAsODA2OSw4MDYwLDgwNDAsODAzMCw4MDI1LDgwMjAsODAxMCw4MDA5LDgwMDgsODAwMSw4MDAwLDc5MTEsNzc3OSw3Nzc3LDc2MzQsNzU0OCw3NTQ3LDc0NzQsNzI4OCw3MDc3LDcwNzEsNzAwMSw3MDAwLDY5NjksNjg4MSw2NjY5LDY2NjgsNjY2Nyw2NjY2LDY2NjUsNjY2NCw2NDg4LDYzNzksNjA2OCw2MDAxLDYwMDAsNTk4Niw1OTg1LDU5ODQsNTkzOCw1OTAxLDU5MDAsNTY4Myw1Njc4LDU2NzIsNTYzMiw1NTc3LDU1NjAsNTU1NSw1NTU0LDU0MzIsNTQwMCw1MzU3LDUzNTMsNTM1MSw1MjY5LDUyMjIsNTA5NCw1MDg0LDUwNjAsNTA1MCw1MDA5LDUwMDcsNTAwNiw1MDAxLDUwMDAsNDk0OSw0OTExLDQ4ODAsNDg0OCw0ODQwLDQ4MDAsNDc4Niw0NzMwLDQ3MTIsNDU2Nyw0NTAwLDQ0NDQsNDQ0Myw0MzY5LDQwNzAsNDA2NCw0MDYzLDQwNDAsNDAyMiw0MDAwLDM3ODQsMzc4MCwzNzQ5LDM3MDIsMzY5MCwzNjg5LDM2NzEsMzU0MiwzNTQxLDM0NjAsMzM5MCwzMzg5LDMzODgsMzMzMywzMzEwLDMzMDcsMzMwNiwzMjk5LDMyODgsMzI4MywzMjYwLDMxMjgsMzAwMCwyNjI4LDI1MDEsMjQ4MCwyNDU1LDI0MjcsMjQyNSwyNDI0LDI0MDQsMjQwMSwyMzc5LDIzNzYsMjM3NSwyMzMyLDIzMjMsMjIyMiwyMTgxLDIxNTIsMjEyMywyMTIxLDIwOTQsMjA4NywyMDg2LDIwODMsMjA4MiwyMDgwLDIwNDksMjAwMSwyMDAwLDE5OTMsMTk5MSwxOTY3LDE5NjIsMTkxMSwxOTAwLDE4ODMsMTg2MywxODEyLDE3MjMsMTcwMSwxNjQ1LDE2MDQsMTUyMSwxNTA1LDE0NzEsMTQzNCwxNDMzLDEzNDQsMTMxMSwxMjYwLDEyNDEsMTIzNCwxMjAxLDEyMDAsMTE5NCwxMTc3LDEwOTksMTA4MCwxMDI3LDEwMjYsMTAyNSw5OTUsOTkzLDk5Miw5MDIsODgwLDg3Myw3ODksNzcxLDcwNSw2NDYsNjM2LDYzMSw2MjYsNjIzLDU4Nyw1NjQsNTU0LDU0OCw1MjMsNTIwLDUxNSw1MTIsNTAzLDUwMiw1MDAsNDY1LDQ0NSw0NDQsNDQzLDM5MSwzODksMjY0LDE5OSwxNzksMTc1LDE2MiwxNjEsMTQzLDEzOSwxMzgsMTM3LDEzNSwxMjMsMTE5LDExMywxMTEsMTEwLDEwNCwxMDIsODgsODQsODMsODIsODEsODAsNzksNzAsNjksNjcsNTMsNDksNDMsMzcsMjYsMjUsMjMsMjIsMjEsMTksMTcsMTMsMTEsNyIsInBvcnRUeXBlIjoxLCJzY2hlZHVsZU1vZGUiOjEsInNjcmlwdCI6eyJmaWxlTmFtZSI6IiIsInVybCI6IiJ9fSwidGFza0xhYmVscyI6eyJub2RlVHlwZSI6Mywibm9kZVJlZ2lvbiI6WzIsMV0sIm5vZGVMYWJlbCI6IiIsInBvcnRUeXBlIjowLCJwb3J0R3JvdXBJZCI6bnVsbCwibm9kZUlkIjoiIiwicmVwZWF0VGltZVJhbmdlIjoiIn0sInNvdXJjZSI6InoiLCJwcmlvcml0eSI6MiwicmVpc3N1ZSI6MSwicmVwZWF0VHlwZSI6MSwicmVwZWF0VGltZSI6IiIsImNhdGVnb3J5IjoiIiwicGFzc1Rocm91Z2hNb2RlIjpmYWxzZSwic3RhdGUiOiIwIiwibGFiZWxJRHMiOltdfQ==","remoteAddr":"10.11.12.35:32810","proto":"HTTP/1.1","contentLength":3124,"transferEncoding":null,"form":null,"postForm":null,"trailer":null}`
	res, err := TransHTTPMessage([]byte(data))
	assert.NoError(t, err)
	fmt.Printf("%+v\n", res)
}
